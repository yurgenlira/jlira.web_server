## {mark} ANSIBLE MANAGED FILE ##

<IfModule mod_ssl.c>
{% for port in apache_https_ports %}
    <VirtualHost _default_:{{ port }}>
        ServerName {{ apache_server_name }}
        ServerAdmin webmaster@{{ apache_server_name }}
        DocumentRoot /var/www/html

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
        SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

{# {% if apache_install_php %}
        # PHP-FPM Configuration
        <FilesMatch \.php$>
            SetHandler "proxy:unix:/var/run/php/php{{ apache_php_version }}-fpm.sock|fcgi://localhost"
        </FilesMatch>
{% endif %} #}

        <FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
        </FilesMatch>

        <Directory /usr/lib/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>
    </VirtualHost>

{% endfor %}
</IfModule>