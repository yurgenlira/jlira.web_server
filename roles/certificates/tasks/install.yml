# SPDX-License-Identifier: MIT-0
---
- name: Install python3-cryptography (required by community.crypto)
  ansible.builtin.apt:
    name: python3-cryptography
    state: present
    update_cache: false
  when: ansible_os_family == 'Debian'

- name: Ensure certificate output directory exists
  ansible.builtin.file:
    path: "{{ certificates_cert_dir }}"
    state: directory
    mode: "0755"
    owner: "{{ certificates_owner }}"
    group: "{{ certificates_group }}"

- name: Ensure private key output directory exists
  ansible.builtin.file:
    path: "{{ certificates_key_dir }}"
    state: directory
    mode: "0700"
    owner: "{{ certificates_owner }}"
    group: "{{ certificates_group }}"